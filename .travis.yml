language : node_js
node_js:
 - "10"
 - "9"

os:
 - linux

stages:
 - test
 - name: deploy

jobs:
 include:
   - stage: test
     script:
       - node --version
       - npm --version
       - echo "Testing Started ..."
       - echo "Testing Finished."

   - stage: deploy
     script:
       - echo "NPM Deploying Started ..."
       - npm version
       - echo "NPM Building Finished."

     deploy:
        provider: npm publish
        email: 659721336@qq.com
        api_key: "$NPM_TOKEN"
        on:
            all_branches: true